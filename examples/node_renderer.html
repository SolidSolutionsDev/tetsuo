<html>
    <head>
        <title>Node renderer example</title>

        <style>
            body,
            html {
                margin: 0;
                background: gray;
            }
        </style>
    </head>

    <body>
        <div id="viewport"></div>

        <script src="../node_modules/three/build/three.min.js"></script>
        <script src="../dist/tetsuo.min.js"></script>

        <script>
            // when page is ready
            TETSUO.Utils.ready(() => {
                // initialize tetsuo renderer
                let renderer = new TETSUO.NodeRenderer();

                // create a node
                let node = new TETSUO.ShaderNode({
                    fragmentShader: /* glsl */ `
                        uniform float iTime;
                        varying vec2 vUv;

                        void main() {
                            vec3 col = 0.5 + 0.5*cos(iTime+vUv.xyx+vec3(0,2,4));
                            gl_FragColor = vec4(col, 1.);
                        }
                    `,
                });

                // connect node to the output
                renderer.connectToScreen(node);

                let time;
                function update() {
                    time = performance.now() / 1000;
                    renderer.update(time);
                    renderer.render();
                    requestAnimationFrame(update);
                }

                requestAnimationFrame(update);
            });
        </script>
    </body>
</html>
