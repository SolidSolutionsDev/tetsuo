<html>
    <head>
        <title>Loader example</title>

        <style>
            body,
            html {
                margin: 0;
                background: gray;
            }
        </style>
    </head>

    <body>
        <div id="viewport"></div>

        <script src="../node_modules/three/build/three.min.js"></script>
        <script src="../dist/tetsuo.min.js"></script>

        <script>
            // when page is ready
            TETSUO.Utils.ready(() => {
                // initialize loader
                let loader = new TETSUO.Loader();

                // load a texture
                loader.loadTexture("res/wall.png", (texture) => {
                    // when texture is loaded
                    // initialize tetsuo renderer and loop
                    let bootstrap = new TETSUO.Bootstrap({
                        viewportElement: document.getElementById("viewport"),
                        dev: true,
                        autoStart: true,
                    });

                    // create a node
                    let node = new TETSUO.ShaderNode({
                        fragmentShader: /* glsl */ `
                            uniform float iTime;
                            uniform sampler2D tex;
                            varying vec2 vUv;

                            void main() {
                                vec4 t = texture2D(tex, vUv);
                                gl_FragColor = t;
                            }
                        `,

                        uniforms: {
                            tex: { value: texture },
                        },
                    });

                    // connect node to the output
                    bootstrap.connectToScreen(node);
                });
            });
        </script>
    </body>
</html>
